üìö Library Management API
FastAPI-based REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–Ω–∏–≥ –∏ –∞–≤—Ç–æ—Ä–æ–≤. –ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å API, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, rate limiting –∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å.

üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
Python 3.11+

PostgreSQL 15+

Redis 7+

Docker & Docker Compose

–£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3 –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker:
Docker-compose up

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
üìò Swagger UI: http://localhost:8000/docs

API Endpoints
üìå API v1 (/api/v1/)
–ê–≤—Ç–æ—Ä—ã
text
GET    /api/v1/authors/           # –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–æ–≤
GET    /api/v1/authors/{id}       # –ü–æ–ª—É—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∞ –ø–æ ID
POST   /api/v1/authors/           # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∞–≤—Ç–æ—Ä–∞
PUT    /api/v1/authors/{id}       # –û–±–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∞
DELETE /api/v1/authors/{id}       # –£–¥–∞–ª–∏—Ç—å –∞–≤—Ç–æ—Ä–∞
–ö–Ω–∏–≥–∏
text
GET    /api/v1/books/             # –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
GET    /api/v1/books/{id}         # –ü–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ ID
POST   /api/v1/books/             # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É
PUT    /api/v1/books/{id}         # –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–∏–≥—É
DELETE /api/v1/books/{id}         # –£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É

üìå API v2 (/api/v2/)
–í—Å–µ endpoints –∏–∑ v1 –ø–ª—é—Å:
–ö–Ω–∏–≥–∏ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ)
text
GET    /api/v2/books/             # + —Ñ–∏–ª—å—Ç—Ä –ø–æ is_available
PATCH  /api/v2/books/{id}/availability # –ò–∑–º–µ–Ω–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–Ω–∏–≥–∏
–ù–æ–≤–æ–µ –≤ v2:

–ü–æ–ª–µ is_available –¥–ª—è –∫–Ω–∏–≥

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

–û—Ç–¥–µ–ª—å–Ω—ã–π endpoint –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é

API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ API –∫–ª—é—á—É:

curl -H "Authorization: Bearer your-api-key"

üîÑ –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
–î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π POST –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:

curl -X POST \
  -H "Idempotency-Key: unique-request-123" \
  -H "Authorization: Bearer your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"name": "–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π", "nationality": "–†—É—Å—Å–∫–∏–π"}' \
  http://localhost:8000/api/v1/authors/
–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å —Ç–µ–º –∂–µ Idempotency-Key –≤–µ—Ä–Ω–µ—Ç —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–∞.

Rate Limiting
API –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤:

–õ–∏–º–∏—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
GET –∑–∞–ø—Ä–æ—Å—ã: 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É

POST –∑–∞–ø—Ä–æ—Å—ã: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É

PUT/PATCH –∑–∞–ø—Ä–æ—Å—ã: 60 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É

DELETE –∑–∞–ø—Ä–æ—Å—ã: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É

üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
–ê–≤—Ç–æ—Ä (Author)
python
{
  "id": 1,
  "name": "–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π",
  "bio": "–†—É—Å—Å–∫–∏–π –ø–∏—Å–∞—Ç–µ–ª—å...",
  "birth_date": "1828-09-09",
  "nationality": "–†—É—Å—Å–∫–∏–π",
  "created_at": "2024-01-01T12:00:00Z",
  "updated_at": "2024-01-01T12:00:00Z",
  "books_count": 10
}
–ö–Ω–∏–≥–∞ (Book) - v1
python
{
  "id": 1,
  "title": "–í–æ–π–Ω–∞ –∏ –º–∏—Ä",
  "isbn": "9785171201234",
  "description": "–†–æ–º–∞–Ω-—ç–ø–æ–ø–µ—è...",
  "year_published": 1869,
  "publisher": "–†—É—Å—Å–∫–∏–π –≤–µ—Å—Ç–Ω–∏–∫",
  "pages": 1225,
  "language": "ru",
  "author_id": 1,
  "created_at": "2024-01-01T12:00:00Z",
  "updated_at": "2024-01-01T12:00:00Z"
}
–ö–Ω–∏–≥–∞ (Book) - v2 (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
python
{
  ... –≤—Å–µ –ø–æ–ª—è –∏–∑ v1 ...
  "is_available": true  # –ù–æ–≤–æ–µ –ø–æ–ª–µ –≤ v2
}